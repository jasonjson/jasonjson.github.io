<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Buy one get one free « CodeHu|Jason Liu's Blog</title>
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.jpg"> 
  <meta name="description" content="一堆商品，买一个可以送一个，但送的那个的价格必须小于买的那个的价格（强调一下，不能等于）。给定商品总数n和每个商品的价格，求得到全部商品的最少开销。 例如：4个商品价格为[5, 4, 3, 3]，最优解为9，即买5和4，送3和3。 两个test case: [100, 99, 98, 1, 1, 1], [100...">
  <link rel="stylesheet" type="text/css" href="/css/main.css">
  <link rel="stylesheet" type="text/css" href="/css/font-awesome-4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <script type="text/javascript" src="/js/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="http://youzikuwebfont.oss-cn-beijing.aliyuncs.com/api.lib.min.js"></script>
</head>
<body>
  <header id="header">
    <div class="headerWrap clearfix">
      <a class="myFont title css2dcc4b9955748" href="/index">CodeHu</a>

      <nav>
        <ul>
          <li><a href="/index" class="myFont css2dcc4b9955748">Home</a></li>
          <li><a href="/blog" class="myFont css2dcc4b9955748">Blog</a></li>
          <li><a href="/about" class="myFont css2dcc4b9955748">About</a></li>
        </ul>
      </nav>

<div class="search-tool" style="float: left;height: 45px;line-height: 45px;margin-left: 12px;">
    <input type="text" class="form-control search-content" id="search-content" style="display: inline-block !important; 
    color: #49525c;
    font-size: 14px;
    line-height: 17px;
    background-color: #e1eaf2;
    border: 1px solid #045bb2;
    border-radius: 4px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,.2),0 1px 0 rgba(255,255,255,.1);
    outline: 0;
    box-sizing: border-box;
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;" placeholder="Search for what you are interested in...." />
</div>

<link rel="stylesheet" href="/search/css/cb-search.css">

<script src="/search/js/bootstrap3-typeahead.min.js"></script>
<script src="/search/js/cb-search.js"></script>

      <a href="" class="master">
        <div class="avatarWrap">
          <!--<img src="/assets/avatar.jpg" alt="Jason Liu" style="max-width: 27px;" />-->
        <!--</div><span class="myFont css2dcc4b9955748">Jason Liu</span>-->
      </a>
    </div>
  </header>

  <main class="clearfix">
    <div class="content">
      <div class="content-inner">

<div class="post">

  <header class="post-header">
    <h1 class="post-title">Buy one get one free</h1>
    <p class="post-meta">Oct 23, 2015 • Jason</p>
  </header>

  <article class="post-content">
    <p><strong><em>一堆商品，买一个可以送一个，但送的那个的价格必须小于买的那个的价格（强调一下，不能等于）。给定商品总数n和每个商品的价格，求得到全部商品的最少开销。 例如：4个商品价格为[5, 4, 3, 3]，最优解为9，即买5和4，送3和3。 两个test case: [100, 99, 98, 1, 1, 1], [100, 99, 98, 98, 97, 97, 97, 97]</em></strong></p>

<p><a href="http://www.jiuzhang.com/qa/221/">Dynamic programming</a></p>

<p>首先排序不用说了。从小到大。然后先给出DP的方程：&lt;/p&gt;</p>
<p>定义状态 f[i][j] 为 i 到 j 这一段的最优值（最少花多少钱全买下来）</p>
<div class="highlighter-rouge"><pre class="highlight"><code>f[i][j] = min(f[i + 1][j - 1]+A[j], f[i][k] + f[k+1][j]) 其中k为i到j-1。&lt;/p&gt; 然后我们来证明为什么这个方程是对的。这个方程的假设前提是，不存在相交的搭配，也就是说不存在下面这种情况的匹配：&lt;/p&gt;
</code></pre>
</div>
<p>从小到大的4个数：a&lt;= b&lt;= c&lt;= d。 a与c一起买，b与d一起买。</p>
<p>为毛呢？首先a和d肯定不相等，否则的话，abcd都相等了，这种情况是不会出现的（我们就是要证明这种情况不会出现），然后看b和c，如果他们相等，那么换成(a,b)和(c,d)，代价一样，并且不会产生相交的匹配（什么叫做相交？你在ac连一条曲线，和bd之间的曲线一定相交）。然后看b和c不等的情况，不等的话，换成(b,c) + (a,d)，也还是不影响结果=c+d， 然后又能使得连线不相交。&lt;/p&gt;</p>
<p>好了，上面我们证明了不相交理论。那么既然连线不想交的话，i-j这一段的匹配情况，只存在两种可能性：</p>
<p>第一种可能是i和j匹配，然后中间的自己配对。</p>
<p>第二种可能是，一定存在一条分割线，使得这个i-j的区间被分为i-k和k+1-j，两个区间之间的自己匹配，没有互相的连边。&lt;/p&gt;
好了，综上所述。问题已经解决并证明。我知道理解起来有点难，特别是证明，我也证明了好久……&lt;/p&gt;</p>
<p>顺便说一下时间复杂度 ： O(n^3)，可能可以用决策单调的优化优化到O(n^2)。</p>
<p>[/expand]&lt;/p&gt;</p>

  </article>
  
  

<div class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'mickeyliu5'; // required: replace example with your forum shortname
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
</div>


<div class="post-comments">
<!-- 多说分享代码 start -->
    <div class="ds-share" data-thread-key="/archivers/buy-one-get-one-free" data-title="Buy one get one free" data-images="https://avatars0.githubusercontent.com/u/17525377?v=3&s=460" data-content="——Clark Zhao的博客" data-url="http://localhost:4000/archivers/buy-one-get-one-free">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">
        
        <li>分享到：</li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
        <li><a class="ds-qq" href="javascript:void(0);" data-service="qq">QQ</a> </li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
 </div>
    <!-- 多说分享代码 end -->
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/archivers/buy-one-get-one-free" data-title="Buy one get one free" data-url="http://localhost:4000/archivers/buy-one-get-one-free"></div>
    <!-- 多说评论框 end -->
    
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"mickeyliu5"};
      (function() {
      	var ds = document.createElement('script');
      	ds.type = 'text/javascript';ds.async = true;
      	ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      	ds.charset = 'UTF-8';
      	(document.getElementsByTagName('head')[0] 
      	 || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->
</div>




</div>

	</div>
</div>
<div class="sidebar">
  <img class="avatar" src="/assets/avatar.jpg" alt="Jason Liu" height="250" width="200">
  <div class="col-box-title name myFont css2dcc4b9955748">Jason Liu</div>
  <p class="myFont css2dcc4b9955748">Time is money.</p>
  <p class="contact">
    
    <a href="https://github.com/mickeyliu5" target="_blank"><i class="fa fa-github" aria-hidden="true"></i></a>
    
    
    <a href="https://weibo.com/u/2631341093" target="_blank"><i class="fa fa-weibo" aria-hidden="true"></i></a>
    
    
    <a href="https://linkedin.com/in/yuanresume" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
    
    
    
    <a href="mailto:jason.yyliu@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    
  </p>

  <div class="col-box-title myFont css2dcc4b9955748">Recent Articles</div>
  <ul class="post-list">
    <!--<li>Theme By <a href="http://zhaoyuxiang.cn">Clark Zhao</a></li>-->
    
      <li><a class="post-link" href="/archivers/largest-bst-subtree" target="_blank">Largest BST Subtree</a></li>
    
      <li><a class="post-link" href="/archivers/verify-preorder-serialization-of-a-binary-tree" target="_blank">Verify Preorder Serialization of a Binary Tree</a></li>
    
      <li><a class="post-link" href="/archivers/increasing-triplet-subsequence" target="_blank">Increasing Triplet Subsequence</a></li>
    
      <li><a class="post-link" href="/archivers/reconstruct-itinerary" target="_blank">Reconstruct Itinerary</a></li>
    
      <li><a class="post-link" href="/archivers/patching-array" target="_blank">Patching Array</a></li>
    
      <li><a class="post-link" href="/archivers/reorder-string" target="_blank">Reorder String</a></li>
    
      <li><a class="post-link" href="/archivers/validate-utf-8-byte-sequence" target="_blank">Validate UTF-8 byte sequence,</a></li>
    
      <li><a class="post-link" href="/archivers/find-the-difference-between-two-set" target="_blank">Find the difference between two set</a></li>
    
      <li><a class="post-link" href="/archivers/output-a-sorted-array-from-an-equation" target="_blank">Output a sorted array from an equation</a></li>
    
      <li><a class="post-link" href="/archivers/longest-increasing-path-in-a-matrix" target="_blank">Longest Increasing Path in a Matrix</a></li>
    
  </ul>
</div>

	</main>
	<footer>
		<div class="footer-inner">
			<span class="myFont">Copyright &copy; 2016 <a href="http://mickeyliu5.github.io">Jason Liu</a></span>
			<ul>
				<li><a href="/index" class="myFont css2dcc4b9955748">Home</a></li>
				<li><a href="/blog" class="myFont css2dcc4b9955748">Blog</a></li>
				<li><a href="/about" class="myFont css2dcc4b9955748">About</a></li>
				<li><a href="javascript:scroll(0,0)" class="myFont css2dcc4b9955748">Top</a></li>
			</ul>
		</div>
	</footer>
	<!--返回顶部按钮-->
	<div class="go-top">
        <div class="arrow"></div>
        <div class="stick"></div>
    </div>

<script type="text/javascript"> /*$youzikuapi.asyncLoad("http://api.youziku.com/webfont/FastJS/yzk_80359A045057B6A0", function () { $youziku.load(".myFont", "6dee8aeae5404ac7b4184b79262d4e1a", "NaiYou");$youziku.draw(); }) Chinese font-family*/
$(function() {
    $(window).scroll(function() {
        if ($(window).scrollTop() > 1000)
            $('div.go-top').show();
        else
            $('div.go-top').hide();
    });
    $('div.go-top').click(function() {
        $('html, body').animate({scrollTop: 0}, 200);
    });
});
</script>
<!--English font-family
<script type="text/javascript" src="http://api.youziku.com/wwwroot/js/g_webfont.min.js"></script> <script type="text/javascript"> WebFont.load({ custom: { urls: ['http://api.youziku.com/webfont/CSS/571879b6f629d80ed8fbe7d2'] } }); </script>-->
</body>
</html>